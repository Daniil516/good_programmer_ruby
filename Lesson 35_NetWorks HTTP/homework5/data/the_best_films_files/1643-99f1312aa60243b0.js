(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1643],{33150:function(e,t,n){"use strict";n.d(t,{Di:function(){return i.Di},sG:function(){return i.sG},Db:function(){return i.Db},V8:function(){return i.V8},Qk:function(){return i.Qk}});var i=n(89419)},89419:function(e,t,n){"use strict";n.d(t,{Di:function(){return m},Dx:function(){return O.D},sG:function(){return b},jx:function(){return j},wb:function(){return y},Db:function(){return l.Db},Rx:function(){return c},V8:function(){return i.V},IP:function(){return u},Qk:function(){return g},P3:function(){return r}});var i=n(22079),o=n(67034),a=n(7729);const r=({votedAt:e})=>e?o.utc(e).utcOffset(a.W).format("DD.MM.YYYY HH:mm"):"";var l=n(83380),s=n(6605);const c=({value:e,ratingType:t,fractionDigits:n})=>{switch(t){case s.bH.Kinopoisk:case s.bH.Imdb:return(0,l.Db)({value:e,fractionDigits:n});default:return(0,l.rb)({value:e})}},u=({value:e,ratingType:t,top250Position:n})=>{switch(t){case s.bH.Kinopoisk:return n?s.EI.KpTop:(0,i.V)({value:e});case s.bH.Imdb:return(0,i.V)({value:e});default:return(0,i.n)({value:e})}},d=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}),v=e=>d.format(e).replace(","," "),m=({count:e,maxDigits:t=3})=>e.toString().length<=t?v(e):`${v(e/1e3)}K`;var p=n(19765),k=n(47165);const b=(e,t,n)=>{if(t.value)return n===s.bH.Kinopoisk?p._.getUrl(k.f.VotesPage,{id:e}):void 0};var f=n(34990);const y=({type:e})=>f.he[e];var O=n(67481),N=n(47736);const _={[s.bH.Imdb]:N.z.imdb,[s.bH.WorldwideCritics]:N.z.rottenTomatos,[s.bH.RussianCritics]:N.z.russianCritics,[s.bH.Expectation]:N.z.expectationRatingBlockTitle,[s.bH.ReviewCount]:N.z.positiveReview},j=e=>e?_[e]:void 0;var h=n(60952);const g=({mainRating:e,rating:t,positiveReviewPercent:n,positiveReviewTotal:i})=>{const o=[],a=t[s.bH.Imdb];a&&(0,h.W)(a)&&o.push({type:s.bH.Imdb,value:a.value,count:a.count});const r=t[s.bH.WorldwideCritics];r&&(0,h.W)(r)&&r.value&&o.push({type:s.bH.WorldwideCritics,value:r.percent,count:r.count});const l=t[s.bH.Expectation];(null===e||void 0===e?void 0:e.type)!==s.bH.Expectation&&l&&(0,h.W)(l)&&o.push({type:s.bH.Expectation,value:l.value,count:l.count});const c=t[s.bH.ReviewCount];n&&null!==c&&void 0!==c&&c.count&&(0,h.W)(c)&&o.push({type:s.bH.ReviewCount,value:n,count:i||null});const u=t[s.bH.RussianCritics];return u&&(0,h.W)(u)&&o.push({type:s.bH.RussianCritics,value:u.value,count:u.count}),o}},67481:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var i=n(94510),o=n.n(i),a=n(6605),r=n(41679),l=n(47736);const s=(e,t)=>{const n=(0,r.u)(e);switch(t){case a.bH.Kinopoisk:return`${n} ${o()(e,l.z.kinopoiskReviewsCountPlurals[0],l.z.kinopoiskReviewsCountPlurals[1],l.z.kinopoiskReviewsCountPlurals[2])}`;case a.bH.Expectation:return`${n} ${o()(e,l.z.expectationReviewCountPlurals[0],l.z.expectationReviewCountPlurals[1])}`;default:return}}},60952:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});const i=e=>Boolean(e&&e.isActive)},76340:function(e,t,n){"use strict";n.d(t,{Pz:function(){return v},K8:function(){return s},nj:function(){return l}});var i=n(5099),o=n.n(i),a=n(78273),r=n.n(a);let l,s;!function(e){e.Orange="orange",e.Gray="gray"}(l||(l={})),function(e){e.All="all",e.OnlyLeft="onlyLeft",e.OnlyRight="onlyRight"}(s||(s={}));var c=n(39566),u=n.n(c),d=n(83605);const v=({content:e,onClick:t=o(),colorScheme:n=l.Orange,borderStyle:i=s.All,className:a,iconClassName:c})=>(0,d.jsx)("button",{onClick:t,type:"button",className:r()(u().touchVoteButton,a,{[u().touchVoteButtonOrange]:n===l.Orange,[u().touchVoteButtonGray]:n===l.Gray,[u().touchVoteButtonBorderOnlyLeft]:i===s.OnlyLeft,[u().touchVoteButtonBorderOnlyRight]:i===s.OnlyRight}),"data-tid":"e4cdf113",children:(0,d.jsx)("span",{className:c,children:e})})},61688:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});n(37667);var i=n(32225),o=n.n(i),a=n(83605);const r=({text:e,icon:t,onClick:n})=>(0,a.jsxs)("button",{type:"button",onClick:n,className:o().root,"data-tid":"5fc9a3c2",children:[t&&(0,a.jsx)("span",{className:o().icon,children:t}),(0,a.jsx)("span",{className:o().text,children:e})]})},69730:function(e,t,n){"use strict";n.d(t,{n:function(){return k}});var i=n(73696),o=(n(37667),n(83875)),a=n(60289),r=n(31649),l=n(62772),s=n.n(l),c=n(83605);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const v=({mainTitle:e,additionalTitle:t,imgSrcSet:n,onCloseModal:i,children:a})=>(0,c.jsx)(o.Lh,{onCloseModal:i,header:(0,c.jsxs)("div",{className:s().headerContainer,children:[n&&(0,c.jsx)(r.E,d({className:s().poster},n)),(0,c.jsxs)("div",{className:s().titleContainer,children:[(0,c.jsx)("div",{className:s().mainTitle,children:e}),t&&(0,c.jsx)("div",{className:s().additionalTitle,children:t})]})]}),children:a});function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const k=e=>(0,c.jsx)(o.Y0,{children:t=>t&&(0,c.jsx)(a.h_,{container:t,children:(0,c.jsx)(v,p({},e))})})},73937:function(e,t,n){"use strict";n.d(t,{O:function(){return S}});var i=n(37667),o=n(5099),a=n.n(o),r=n(35229),l=n.n(r),s=n(76340),c=n(69834),u=n(69730),d=n(78273),v=n.n(d),m=n(69419),p=n(41498),k=n.n(p),b=n(83605);const f=({className:e,currentVoteValue:t=-1,onVote:n=a(),renderCustomIcon:o})=>{const r=(0,i.useRef)(null),l=(0,i.useCallback)((e=>{var t,i;const o=(null===r||void 0===r||null===(t=r.current)||void 0===t?void 0:t.offsetLeft)||0,a=(null===r||void 0===r||null===(i=r.current)||void 0===i?void 0:i.clientWidth)||0,l=e.touches[0].clientX,s=Math.max(m.rM,Math.min(m.Ob,m.rM+Math.floor(m.Ob/a*(l-o))));n(s)}),[n]);return(0,b.jsx)("div",{className:v()(e,k().touchRatingVote),"data-tid":"339b4faf",children:(0,b.jsx)("div",{className:k().starsContaner,onTouchMove:l,ref:r,children:[...Array(m.Ob)].map(((e,i)=>(0,b.jsx)("button",{type:"button",className:k().voteButton,onClick:()=>n(i+1),"data-tid":"bc249eea",children:(null===o||void 0===o?void 0:o({isFilled:i<t}))||(0,b.jsx)("span",{className:i<t?k().starVoted:k().starNoVoted})},i)))})})};var y=n(64705);const O=e=>(0,i.useMemo)((()=>(e=>0===e?y.RatingTypes.Watched:e&&-1!==e?e<=4?y.RatingTypes.Negative:e<=6?y.RatingTypes.Neutral:y.RatingTypes.Positive:y.RatingTypes.NoWatched)(e)),[e]);var N=n(88432),_=n.n(N);const j=({voteValue:e=-1})=>{const t=O(e);return t===y.RatingTypes.NoWatched?(0,b.jsx)("div",{className:_().reviewPreviewNoWatch,"data-tid":"ce87918f",children:c.Z.setVote}):t===y.RatingTypes.Watched?(0,b.jsx)("div",{className:_().reviewPreviewNeutral,"data-tid":"ce87918f",children:(0,b.jsx)("div",{className:_().eye})}):(0,b.jsx)("div",{className:v()({[_().reviewPreviewPositive]:t===y.RatingTypes.Positive,[_().reviewPreviewNegative]:t===y.RatingTypes.Negative,[_().reviewPreviewNeutral]:t===y.RatingTypes.Neutral}),"data-tid":"ce87918f",children:(0,b.jsx)("div",{className:_().reviewPreviewValue,children:e})})};var h=n(75360),g=n.n(h);const S=({initialVote:e,mainTitle:t,additionalTitle:n,imgSrcSet:o,onCloseModal:r=a(),renderCustomIcon:d,onVoteChange:v=a(),onVoteRemove:m=a()})=>{const{0:p,1:k}=(0,i.useState)(e),{0:y,1:O}=(0,i.useState)(!1),N=(0,i.useCallback)((e=>{k(e),O(!0)}),[]),_=(0,i.useCallback)((()=>{l()(p)&&v(p),r()}),[p]),h=(0,i.useCallback)((()=>{m(),r()}),[p]),S=void 0!==e&&-1!==e;return(0,b.jsxs)(u.n,{onCloseModal:r,mainTitle:t,additionalTitle:n,imgSrcSet:o,children:[(0,b.jsx)(j,{voteValue:p}),(0,b.jsx)(f,{currentVoteValue:p,onVote:N,renderCustomIcon:d}),(0,b.jsxs)("div",{className:g().buttonContainer,"data-tid":"adbc60c2",children:[S&&(0,b.jsx)(s.Pz,{className:g().button,colorScheme:s.nj.Gray,onClick:h,content:c.Z.remove}),!S&&(0,b.jsx)(s.Pz,{className:g().button,colorScheme:s.nj.Gray,onClick:r,content:c.Z.cancel}),y&&(0,b.jsx)(s.Pz,{className:g().button,colorScheme:s.nj.Orange,onClick:_,content:c.Z.vote})]})]})}},31938:function(e,t,n){"use strict";n.d(t,{H:function(){return _}});var i=n(12583),o=n(37853),a=n(69834),r=n(1716),l=n(56625),s=n(34764),c=n(73696),u=n(23737),d=n(5099),v=n.n(d),m=n(69419);const p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovieRemoveNotInterested"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"movieId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notInterested"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"remove"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"movieId"},value:{kind:"Variable",name:{kind:"Name",value:"movieId"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovieSetNotInterested"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"movieId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notInterested"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"set"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"movieId"},value:{kind:"Variable",name:{kind:"Name",value:"movieId"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const N=({movieId:e,isNotInterested:t,mutationUpdater:n,onSetCompleted:i,onRemoveCompleted:o})=>{const[a]=function({movieId:e,mutationUpdater:t=v(),onCompleted:n=v()}){return(0,u.useMutation)(f,{variables:{movieId:e},update(e,n){var i,o,a,r;t(e,null===(i=n.data)||void 0===i||null===(o=i.movie)||void 0===o||null===(a=o.notInterested)||void 0===a||null===(r=a.set)||void 0===r?void 0:r.status,{notInterested:{value:!0}})},optimisticResponse:O({},m.lO),errorPolicy:"all",onCompleted:n})}({movieId:e,mutationUpdater:n,onCompleted:i}),[r]=function({movieId:e,mutationUpdater:t=v(),onCompleted:n=v()}){return(0,u.useMutation)(p,{variables:{movieId:e},update(e,n){var i,o,a,r;t(e,null===(i=n.data)||void 0===i||null===(o=i.movie)||void 0===o||null===(a=o.notInterested)||void 0===a||null===(r=a.remove)||void 0===r?void 0:r.status,{notInterested:{value:!1}})},optimisticResponse:b({},m.jO),errorPolicy:"all",onCompleted:n})}({movieId:e,mutationUpdater:n,onCompleted:o}),l=(0,s.h)(a,[]),c=(0,s.h)(r,[]);return[t,t?c:l]},_=(e,t=!0)=>{var n,s,c;const u=(0,i.useDispatch)(),d=(0,l.u)(e.__typename)?a.Z.setNotInterestedTvSeries:a.Z.setNotInterestedFilm;return N({movieId:e.id,isNotInterested:Boolean(null===(n=e.userData)||void 0===n||null===(s=n.watchStatuses)||void 0===s||null===(c=s.notInterested)||void 0===c?void 0:c.value),mutationUpdater:(0,r.b)(e),onSetCompleted:t?()=>u((0,o.X)({text:d})):void 0})}},44177:function(e,t,n){"use strict";n.d(t,{J:function(){return N}});var i=n(34764),o=n(73696),a=n(42448);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const s=(e,t,n,i,o)=>{t&&e.modify({id:(0,a.u)(n)({id:t}),fields:{userData:e=>"SUCCESS"!==i?e:l(l({},e),{},{voting:l(l({},e.voting),{},{value:o,votedAt:null})})}})};var c=n(23737),u=n(69419);const d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovieSetVote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"movieId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"rate"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"vote"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"set"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"movieId"},value:{kind:"Variable",name:{kind:"Name",value:"movieId"}}},{kind:"ObjectField",name:{kind:"Name",value:"rate"},value:{kind:"Variable",name:{kind:"Name",value:"rate"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};var v=n(69120);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const k=(e,t)=>{const[n]=function(){const e=(0,v.G)();return(0,c.useMutation)(d,{context:{headers:{[u.ur]:e}},optimisticResponse:p({},u.lT),errorPolicy:"all"})}();return(0,i.h)((i=>{e&&t&&n({variables:{movieId:e,rate:i},update(n,o){var a,r,l,c;s(n,e,t,null===(a=o.data)||void 0===a||null===(r=a.movie)||void 0===r||null===(l=r.vote)||void 0===l||null===(c=l.set)||void 0===c?void 0:c.status,i)}})}),[e])},b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovieRemoveVote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"movieId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"vote"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"remove"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"movieId"},value:{kind:"Variable",name:{kind:"Name",value:"movieId"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const O=(e,t)=>{const[n]=function(){const e=(0,v.G)();return(0,c.useMutation)(b,{context:{headers:{[u.ur]:e}},optimisticResponse:y({},u.pj),errorPolicy:"all"})}();return(0,i.h)((()=>{e&&t&&n({variables:{movieId:e},update(n,i){var o,a,r,l;s(n,e,t,null===(o=i.data)||void 0===o||null===(a=o.movie)||void 0===a||null===(r=a.vote)||void 0===r||null===(l=r.remove)||void 0===l?void 0:l.status,null)}})}),[e])},N=(e,t)=>[k(e,t),O(e,t)]},36950:function(e,t,n){"use strict";n.d(t,{X:function(){return b}});var i=n(34764),o=n(73696),a=n(23737),r=n(5099),l=n.n(r),s=n(69419);const c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovieRemoveWatched"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"movieId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watched"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"remove"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"movieId"},value:{kind:"Variable",name:{kind:"Name",value:"movieId"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};var u=n(69120);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovieSetWatched"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"movieId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watched"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"set"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"movieId"},value:{kind:"Variable",name:{kind:"Name",value:"movieId"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const b=(e,t,n,o)=>{const[r]=function({movieId:e,mutationUpdater:t=l(),refetchQueries:n}){const i=(0,u.G)();return(0,a.useMutation)(m,{variables:{movieId:e},context:{headers:{[s.ur]:i}},update(e,n){var i,o,a,r;t(e,null===(i=n.data)||void 0===i||null===(o=i.movie)||void 0===o||null===(a=o.watched)||void 0===a||null===(r=a.set)||void 0===r?void 0:r.status,{watched:{value:!0}})},refetchQueries:n,optimisticResponse:k({},s.br),errorPolicy:"all"})}({movieId:e,mutationUpdater:n,refetchQueries:o}),[d]=function({movieId:e,mutationUpdater:t=l(),refetchQueries:n}){const i=(0,u.G)();return(0,a.useMutation)(c,{variables:{movieId:e},context:{headers:{[s.ur]:i}},update(e,n){var i,o,a,r;t(e,null===(i=n.data)||void 0===i||null===(o=i.movie)||void 0===o||null===(a=o.watched)||void 0===a||null===(r=a.remove)||void 0===r?void 0:r.status,{watched:{value:!1}})},refetchQueries:n,optimisticResponse:v({},s.iH),errorPolicy:"all"})}({movieId:e,mutationUpdater:n,refetchQueries:o}),p=(0,i.h)(r,[]),b=(0,i.h)(d,[]);return[t,t?b:p]}},69120:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var i=n(69419),o=n(92385);const a=()=>(0,o.a)()?i.nm:i.Cn},69991:function(e,t,n){"use strict";n.d(t,{a:function(){return a}});var i=n(5799),o=n(5274);const a=(e,t,n,a)=>{const r=e===i.G.WatchList,l=t===i.Y.Remove&&a===o.iM.Yes,s=t===i.Y.Add&&a!==o.iM.Yes;return n&&r&&(l||s)}},1716:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var i=n(73696);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const r=e=>(t,n,i)=>((e,t,n,i)=>{e.modify({id:e.identify(t),fields:{userData:e=>"SUCCESS"!==n?e:a(a({},e),{},{watchStatuses:a(a({},e.watchStatuses),i)})}})})(t,e,n,i)},72772:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var i=n(5799);const o=e=>e.some((e=>(null===e||void 0===e?void 0:e.id)===i.G.WatchList))},56625:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var i=n(5274);function o(e){return e===i.vy.TvSeries||e===i.vy.MiniSeries||e===i.vy.TvShow}},39566:function(e){e.exports={touchVoteButton:"styles_touchVoteButton__4DpgI",touchVoteButtonOrange:"styles_touchVoteButtonOrange__7cAQr",touchVoteButtonGray:"styles_touchVoteButtonGray__6ZeA8",touchVoteButtonBorderOnlyLeft:"styles_touchVoteButtonBorderOnlyLeft__TXLCR",touchVoteButtonBorderOnlyRight:"styles_touchVoteButtonBorderOnlyRight__dICR_"}},32225:function(e){e.exports={root:"style_root__2UfdO",icon:"style_icon__CCIJW",text:"style_text__lR_GB"}},62772:function(e){e.exports={poster:"styles_poster__8HAXb",mainTitle:"styles_mainTitle__PZVl_",additionalTitle:"styles_additionalTitle__dRo5_",headerContainer:"styles_headerContainer__Nwtfi",titleContainer:"styles_titleContainer__Gj2UE"}},75360:function(e){e.exports={buttonContainer:"styles_buttonContainer__OkFpb",button:"styles_button__rTd_o"}},88432:function(e){e.exports={reviewPreview:"styles_reviewPreview__JI_IM",reviewPreviewNeutral:"styles_reviewPreviewNeutral__odjGO styles_reviewPreview__JI_IM",reviewPreviewPositive:"styles_reviewPreviewPositive__m9qYF styles_reviewPreview__JI_IM",reviewPreviewNoWatch:"styles_reviewPreviewNoWatch__45rdo styles_reviewPreview__JI_IM",reviewPreviewNegative:"styles_reviewPreviewNegative__hvpUa styles_reviewPreview__JI_IM",reviewPreviewValue:"styles_reviewPreviewValue__TECr2",eye:"styles_eye__Uhqlt"}},41498:function(e){e.exports={touchRatingVote:"styles_touchRatingVote__WNjxj",starsContaner:"styles_starsContaner__OIka1",iconButton:"styles_iconButton___Xq09",voteButton:"styles_voteButton__qwz2h styles_iconButton___Xq09",baseIcon:"styles_baseIcon__qRkKr",starNoVoted:"styles_starNoVoted__U7x3J styles_baseIcon__qRkKr",starVoted:"styles_starVoted__xwOPj styles_baseIcon__qRkKr"}}}]);
//# sourceMappingURL=https://kinopoisk-frontend-internal.s3.mds.yandex.net/frontend-www/release/_next/static/chunks/1643-99f1312aa60243b0.js.map